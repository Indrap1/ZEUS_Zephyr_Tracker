<!DOCTYPE HTML>
<?php
include 'config.php';
session_start();
?>

<html>
	<head>
		<meta name="description" content="Trackking application used to check status of the Zephyr bike in real time." />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="keywords" content="ZEUS, Zephyr, NovAtel, tracker" />
		<meta name="viewport" content="initial-scale=1.0">
		<meta charset="utf-8">
		<title>ZEUS Zephyr Tracker</title>
		<link rel="stylesheet" type="text/css" href="styles.css" title="style" />
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
        <script src="https://maps.googleapis.com/maps/api/js?v=3.11&sensor=false" type="text/javascript"></script>
        <script type="text/javascript">
        // check DOM Ready
        $(document).ready(function() {
            // execute
            (function() {
                // map options
                var options = {
				    tilt: 0,
                    zoom: 18,
                    center: new google.maps.LatLng(51.08046525830, -114.13115824621),
                    mapTypeId: google.maps.MapTypeId.SATELLITE,
                };

                // init map
                var map = new google.maps.Map(document.getElementById('map_canvas'), options);

				// test data points
				var markerData = [
						['Point', 51.08046675182, -114.13115363834, 1120.9111],
						['Point', 51.08046525830, -114.13115824621, 1120.4446],
						['Point', 51.08048599545, -114.13114181231, 1123.2572],
						['Point', 51.08052772191, -114.13109897239, 1128.9341],
						['Point', 51.08055907471, -114.13108089432, 1132.5900],
						['Point', 51.08052517029, -114.13111777736, 1127.1075],
						['Point', 51.08052089525, -114.13112193132, 1126.4992],
						['Point', 51.08059299614, -114.13102870848, 1141.2048],
						['Point', 51.08059345185, -114.13103043539, 1141.1481],
						['Point', 51.08059526863, -114.13103104902, 1141.2425],
						['Point', 51.08059576938, -114.13103346209, 1141.1454],
						['Point', 51.08049989066, -114.13114167547, 1124.1777],
						['Point', 51.08059416555, -114.13103713375, 1140.7942],
						['Point', 51.08051374013, -114.13112528426, 1126.5375],
						['Point', 51.08049835196, -114.13113718940, 1124.5871],
						['Point', 51.08053409624, -114.13111609931, 1128.6612],
						['Point', 51.08047173249, -114.13110414708, 1127.5029],
						['Point', 51.08054704292, -114.13145455467, 1097.6230],
						['Point', 51.08036806919, -114.13065044478, 1161.2898],
						['Point', 51.08046504834, -114.13108015100, 1126.1095],
						['Point', 51.08050524590, -114.13118209248, 1110.7614],
						['Point', 51.08060555552, -114.13126035449, 1106.1844],
						['Point', 51.08059567846, -114.13136002411, 1090.5273],
						['Point', 51.08047723385, -114.13116081815, 1118.7578],
						['Point', 51.08046357716, -114.13113311729, 1123.7511],
						['Point', 51.08048726380, -114.13113798039, 1112.3681],
						['Point', 51.08045005229, -114.13112121675, 1120.8721],
						['Point', 51.08045555304, -114.13115819039, 1117.1890],
						['Point', 51.08046253022, -114.13122664821, 1112.4072],
						['Point', 51.08054682140, -114.13153257421, 1081.4323],
						['Point', 51.08052696001, -114.13147986775, 1088.8394],
						['Point', 51.08028970509, -114.13127522450, 1162.9769],
						['Point', 51.08031246973, -114.13081272560, 1155.6327],
						['Point', 51.08009848324, -114.13099814491, 1136.3149],
						['Point', 51.08012832664, -114.13101194007, 1126.9091],
						['Point', 51.08013243891, -114.13100622621, 1123.9679],
						['Point', 51.08013404753, -114.13100012448, 1122.0786],
						['Point', 51.08012890873, -114.13099243250, 1121.6991],
						['Point', 51.08011597241, -114.13097692510, 1123.9487],
						['Point', 51.08011523882, -114.13097363722, 1123.4232],
						['Point', 51.08011156638, -114.13095965764, 1123.9138],
						['Point', 51.08003843281, -114.13092028531, 1141.6181],
						['Point', 51.08006300310, -114.13092506496, 1135.1598],
						['Point', 51.08006441197, -114.13091957738, 1134.6604],
						['Point', 51.08006385251, -114.13091228699, 1133.9498],
						['Point', 51.08004930002, -114.13088984728, 1137.3596],
						['Point', 51.08004625803, -114.13087570551, 1137.8588],
						['Point', 51.08008937925, -114.13089771902, 1125.3548],
						['Point', 51.08009332526, -114.13088478163, 1124.4166],
						['Point', 51.08008235068, -114.13086598899, 1127.0726],
						['Point', 51.08008858397, -114.13085584941, 1125.0436],
						['Point', 51.08008497655, -114.13084187556, 1125.1909],
						['Point', 51.08005659022, -114.13080318228, 1132.7536],
						['Point', 51.07999089664, -114.13072828284, 1151.4606],
						['Point', 51.08006965610, -114.13079166431, 1126.7234],
						['Point', 51.08002903410, -114.13075233315, 1135.9921],
						['Point', 51.08005819577, -114.13077828373, 1124.7247],
						['Point', 51.08005146724, -114.13076017777, 1125.4005],
						['Point', 51.08004754549, -114.13075001790, 1124.6172],
						['Point', 51.08004824665, -114.13075072507, 1121.6394],
						['Point', 51.08003744012, -114.13073704017, 1122.7645],
						['Point', 51.08004950904, -114.13075369605, 1116.3129],
						['Point', 51.08004093794, -114.13074128435, 1116.3866],
						['Point', 51.08002969655, -114.13073092346, 1117.1977],
						['Point', 51.08001768847, -114.13071852272, 1117.8235],
						['Point', 51.08001863561, -114.13072765015, 1113.8949],
						['Point', 51.08000819990, -114.13072168645, 1114.4870],
						['Point', 51.08000594430, -114.13072737832, 1112.6370],
						['Point', 51.07999636861, -114.13072305927, 1112.8785],
						['Point', 51.07999021539, -114.13072975815, 1111.0463],
						['Point', 51.07997826807, -114.13072623745, 1111.8451],
						['Point', 51.07990526392, -114.13076667816, 1129.8012],
						['Point', 51.07993229419, -114.13068855943, 1120.4373],
						['Point', 51.07992036620, -114.13068929322, 1120.7422],
						['Point', 51.07994045516, -114.13072696961, 1110.8019],
						['Point', 51.07991220608, -114.13072111271, 1116.6681],
						['Point', 51.07990742475, -114.13071152946, 1114.2448],
						['Point', 51.07990051829, -114.13071613836, 1113.1116],
						['Point', 51.07989255826, -114.13072004878, 1112.3811],
						['Point', 51.07988565185, -114.13072458268, 1111.5564],
						['Point', 51.07984788764, -114.13074086250, 1119.0449],
						['Point', 51.07986290890, -114.13072773276, 1110.9912],
						['Point', 51.07985306108, -114.13072928180, 1110.8909],
						['Point', 51.07984245170, -114.13072862533, 1111.0078],
						['Point', 51.07983182064, -114.13072839533, 1111.1744],
						['Point', 51.07982208219, -114.13072766556, 1111.1457],
						['Point', 51.07982617524, -114.13071666352, 1110.3111],
						['Point', 51.07983188301, -114.13071084252, 1105.3659],
						['Point', 51.07981397853, -114.13071338548, 1107.9749],
						['Point', 51.07979700623, -114.13071999253, 1109.3995],
						['Point', 51.07978203425, -114.13072754723, 1110.4792],
						['Point', 51.07977470266, -114.13073090398, 1109.9301],
						['Point', 51.07976554468, -114.13073344119, 1110.5895],
						['Point', 51.07975471321, -114.13073782254, 1111.3104],
						['Point', 51.07974036162, -114.13074298516, 1112.7099],
						['Point', 51.07971445721, -114.13069641678, 1115.9753],
						['Point', 51.07970831141, -114.13070375260, 1115.3267],
						['Point', 51.07970528840, -114.13072229460, 1116.4296],
						['Point', 51.07971120026, -114.13074539409, 1113.2165],
						['Point', 51.07968284869, -114.13071430879, 1115.4351],
						['Point', 51.07967582785, -114.13071742593, 1114.7413],
						['Point', 51.07966190303, -114.13073717782, 1118.3775],
						['Point', 51.07967868259, -114.13077787273, 1113.4585],
						['Point', 51.07966378726, -114.13078193275, 1113.6485],
						['Point', 51.07964932591, -114.13077515474, 1113.1603],
						['Point', 51.07964851258, -114.13079090919, 1113.2031],
						['Point', 51.07964590880, -114.13080108157, 1113.6802],
						['Point', 51.07960057404, -114.13078137104, 1119.9395],
						['Point', 51.07959350456, -114.13079294726, 1119.0852],
						['Point', 51.07958992937, -114.13080872745, 1120.6062],
						['Point', 51.07959502371, -114.13083265394, 1117.8921],
						['Point', 51.07955093917, -114.13081437684, 1128.9828],
						['Point', 51.07953171748, -114.13081831828, 1132.2047],
						['Point', 51.07960044171, -114.13091010391, 1115.3682],
						['Point', 51.07959045315, -114.13091678994, 1114.7899],
						['Point', 51.07957538943, -114.13092796497, 1116.1762],
						['Point', 51.07958032547, -114.13092459683, 1110.9156],
						['Point', 51.07957517791, -114.13093501782, 1109.8001],
						['Point', 51.07953332287, -114.13095680510, 1120.9918],
						['Point', 51.07955471845, -114.13096220050, 1110.6158],
						['Point', 51.07952104449, -114.13095846778, 1119.2782],
						['Point', 51.07951471419, -114.13096998543, 1118.8128],
						['Point', 51.07949916398, -114.13097550070, 1121.1413],
						['Point', 51.07949681710, -114.13098517004, 1118.5453],
						['Point', 51.07948986664, -114.13099635090, 1118.0148],
						['Point', 51.07948568261, -114.13101208870, 1118.5427],
						['Point', 51.07945402987, -114.13099838784, 1124.3900],
						['Point', 51.07946408079, -114.13100787936, 1118.4530],
						['Point', 51.07944691319, -114.13099635896, 1120.4822],
						['Point', 51.07943814220, -114.13099243494, 1120.8297],
						['Point', 51.07942673789, -114.13097997211, 1120.8900],
						['Point', 51.07942103127, -114.13097331734, 1120.5312],
						['Point', 51.07942738347, -114.13097757158, 1116.9085],
						['Point', 51.07941677080, -114.13096570559, 1117.9530],
						['Point', 51.07940608001, -114.13095163163, 1119.1098],
						['Point', 51.07940187758, -114.13094132017, 1118.2049],
						['Point', 51.07939112376, -114.13092152984, 1118.2034],
						['Point', 51.07941325421, -114.13093250176, 1113.2857],
						['Point', 51.07936936588, -114.13087948874, 1120.6804],
						['Point', 51.07936953153, -114.13086845354, 1120.9894],
						['Point', 51.07936872550, -114.13085520498, 1121.2308],
						['Point', 51.07937011436, -114.13083121499, 1121.8774],
						['Point', 51.07937064945, -114.13082053889, 1121.3046],
						['Point', 51.07938336775, -114.13080693079, 1119.9321],
						['Point', 51.07936948435, -114.13079706918, 1120.2945],
						['Point', 51.07938321832, -114.13081308169, 1116.5178],
						['Point', 51.07937764517, -114.13079224834, 1118.3065],
						['Point', 51.07937759547, -114.13077616760, 1120.1113],
						['Point', 51.07938780588, -114.13075947371, 1120.2009],
						['Point', 51.07938823853, -114.13074917091, 1119.7923],
						['Point', 51.07939920533, -114.13073826386, 1119.2112],
						['Point', 51.07940915719, -114.13072536924, 1118.9735],
						['Point', 51.07941615207, -114.13071848321, 1119.0385],
						['Point', 51.07942219263, -114.13071551369, 1119.4403],
						['Point', 51.07942974547, -114.13071159389, 1119.4648],
						['Point', 51.07944004223, -114.13070631581, 1118.9364],
						['Point', 51.07945074031, -114.13070529778, 1118.5678],
						['Point', 51.07946079987, -114.13069951420, 1118.7084],
						['Point', 51.07946519131, -114.13069064996, 1120.7479],
						['Point', 51.07947353929, -114.13068344575, 1121.4866],
						['Point', 51.07949074318, -114.13068041505, 1120.4799],
						['Point', 51.07951416291, -114.13068355727, 1120.9975],
						['Point', 51.07952009217, -114.13068398966, 1121.4029],
						['Point', 51.07942892820, -114.13067750652, 1120.3869],
						['Point', 51.07955238909, -114.13069499222, 1117.1528],
						['Point', 51.07953480044, -114.13069325693, 1120.5869],
						['Point', 51.07954385703, -114.13069666892, 1120.5576],
						['Point', 51.07955090337, -114.13070454251, 1120.1502],
						['Point', 51.07978714511, -114.13097780950, 1105.7381],
						['Point', 51.07956728171, -114.13070584172, 1120.8090],
						['Point', 51.07957872491, -114.13071246585, 1120.2964],
						['Point', 51.07958436496, -114.13071329964, 1120.5062],
						['Point', 51.07959257594, -114.13070569465, 1121.7786],
						['Point', 51.07972744773, -114.13092035368, 1146.2204],
						['Point', 51.07974536979, -114.13092503934, 1139.6980],
						['Point', 51.07978783346, -114.13094237917, 1129.0212],
						['Point', 51.07985819685, -114.13098761748, 1108.6094],
						['Point', 51.07965751893, -114.13070639572, 1124.1729],
						['Point', 51.07966347451, -114.13070544469, 1122.5859],
						['Point', 51.07966017046, -114.13070392014, 1121.7776],
						['Point', 51.07965261637, -114.13070192157, 1121.3850],
						['Point', 51.07967352135, -114.13069538342, 1121.6100],
						['Point', 51.07969385938, -114.13070756799, 1120.6627],
						['Point', 51.07970792799, -114.13070529671, 1120.9077],
						['Point', 51.07970750746, -114.13067614206, 1121.9301],
						['Point', 51.07971843256, -114.13066880821, 1121.3866],
						['Point', 51.07976942558, -114.13066470807, 1121.7661],
						['Point', 51.07975003683, -114.13065065976, 1122.3589],
						['Point', 51.07973814154, -114.13064258761, 1122.3584],
						['Point', 51.07974556137, -114.13063736896, 1122.8035],
						['Point', 51.07976404603, -114.13063270616, 1123.2418],
						['Point', 51.07977087478, -114.13062943276, 1123.0926],
						['Point', 51.07978182855, -114.13062867905, 1122.8526],
						['Point', 51.07978284399, -114.13063589423, 1121.3212],
						['Point', 51.07978850649, -114.13063889622, 1121.1530],
						['Point', 51.07981319533, -114.13064289392, 1120.4300],
						['Point', 51.07980306018, -114.13069572566, 1129.0107],
						['Point', 51.07982640532, -114.13058140309, 1123.3561],
						['Point', 51.07983140540, -114.13063929526, 1125.8152],
						['Point', 51.07984016617, -114.13062150368, 1127.4789],
						['Point', 51.07988112608, -114.13058673646, 1116.7198],
						['Point', 51.07987441103, -114.13050191452, 1123.4320],
						['Point', 51.07992125409, -114.13059042320, 1110.2556],
						['Point', 51.07992288172, -114.13052320232, 1114.7039],
						['Point', 51.07987476967, -114.13047668418, 1132.2555]
				];
				// Modify marker point appearance
				var pinIcon = new google.maps.MarkerImage(
					"http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|FFFF00",
					null, 
					null,
					null,
					new google.maps.Size(18, 30)
				);  

				// Initialize array to contain travel path
				var travelPath = new Array();
				var origin = new google.maps.LatLng(markerData[0][1], markerData[0][2]);

                for (var i = 0; i < markerData.length; i++) {
                    // Initialize markers
                    var marker = new google.maps.Marker({
                        position: new google.maps.LatLng(markerData[i][1], markerData[i][2]),
                        map: map,
                        title: 'Data Point: ' + i
                    });
                	var markerPath = new google.maps.LatLng(markerData[i][1], markerData[i][2]);
					marker.setIcon(pinIcon);
					travelPath.push(markerPath);

                    // Process multiple info windows
                    (function(marker, i) {
                        // Add click event
                        google.maps.event.addListener(marker, 'click', function() {
                            infowindow = new google.maps.InfoWindow({
							content: '<b>Data Point:</b> ' + i +
								'<br>Latitude: ' + markerData[i][1] +
								'<br>Longitude: ' + markerData[i][2] +
								'<br>Altitude: ' + markerData[i][3] +
								'<br>Speed: TOO FAST' +
								'<br>Acceleration: ZOOM ZOOM' 
                            });
                            infowindow.open(map, marker);
                        });
                    })(marker, i);
                }

				// Initialize travel path properties
				var pathProperties=new google.maps.Polyline({
					path:travelPath,
					strokeColor:"#0000FF",
					strokeOpacity:0.8,
					strokeWeight:2
				});
				console.log(pathProperties);
				pathProperties.setMap(map);

				// Event for resetting to origin on button press
				google.maps.event.addDomListener(document.getElementById("reset"), 'click', function() {
					map.setCenter(origin);
					map.setZoom(30);
				});

            })();
        });
        </script>
	</head>
	<body>
		<div id="main">
			<div id="header">
				<div id="logo">
					<div id="logo_text">
						<!-- class="logo_colour", allows you to change the colour of the text -->
						<h1><a href="index.php">ZEUS</a></h1>
						<under>Zephyr Tracker</under>
					</div>
				</div>
				<div id="menubar">
					<ul id="menu">
						<!-- put class="selected" in the li tag for the selected page - to highlight which page you're on -->
						<li class="selected"><a href="index.php">Home</a></li>
						<li><a href="about.php">About</a></li>
<?php
if (empty($_SESSION["username"])) {
?>
			 <li><a href="loginpage.php">Login</a></li>
<?php
} else if (!empty($_SESSION["username"])) {
?>
	<li><a href="UserCP.php">User: <?php
	if (!empty($_SESSION["username"])) {
		echo $_SESSION["username"];
	}
?> CP</a></li> 
		   <li><a href = "setuprace.php" title ="Setup Race">Upload Image</a></li>
		   <li><a href="logout.php" tite="Logout">Logout</a></li>              
<?php
}
?>
					</ul>
				</div>
			</div>
			<div id="site_content">
				<div id="content">
					<b>Most Recent Test Data</b>
					<br></br>
						<div id="map_canvas" style="width: 800px; height:500px;"></div>
						<input type="button" id="reset" value="Reset to origin"></input>

				</div>
			</div>
		<div id="content_footer"></div>
	<div id="footer">
	<a>Created by Indra Prasetyo | Christopher Smith | Neil Baskerville-Bridges | Jonathan Wan</a>
	</div>
	</div>
	</body>
</html>
